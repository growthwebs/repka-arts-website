{% if settings.cart_drawer_show_banner %}
  {% assign banner_text = settings.cart_drawer_banner_text %}
  {% assign banner_link = settings.cart_drawer_banner_link %}
  {% assign banner_new_tab = settings.cart_drawer_banner_open_in_new_tab %}
  {% assign left_icon = settings.cart_drawer_banner_left_icon | default: 'none' %}
  {% assign left_image = settings.cart_drawer_banner_left_image %}
  {% assign right_icon = settings.cart_drawer_banner_right_icon | default: 'none' %}
  {% assign right_image = settings.cart_drawer_banner_right_image %}
  {% assign banner_font_size = settings.cart_drawer_banner_font_size | default: 14 %}
  {% assign banner_icon_size = settings.cart_drawer_banner_icon_size | default: 24 %}

  {% assign has_left_icon = false %}
  {% assign has_right_icon = false %}
  {% assign has_text = false %}

  {% if left_icon != 'none' or left_image != blank %}
    {% assign has_left_icon = true %}
  {% endif %}

  {% if right_icon != 'none' or right_image != blank %}
    {% assign has_right_icon = true %}
  {% endif %}

  {% if banner_text != blank %}
    {% assign has_text = true %}
  {% endif %}

  {% if has_left_icon or has_right_icon or has_text %}
    <div
      class="cart-drawer-banner color-{{ settings.cart_drawer_banner_color_scheme | default: 'scheme-1' }}"
      style="--cart-drawer-banner-font-size: {{ banner_font_size }}px; --cart-drawer-banner-icon-size: {{ banner_icon_size }}px;"
    >
      <div class="cart-drawer-banner__inner">
        <span class="cart-drawer-banner__icon{% unless has_left_icon %} cart-drawer-banner__icon--placeholder{% endunless %}">
          {% if has_left_icon %}
            {% render 'icon-or-image',
              icon: left_icon,
              image_upload: left_image,
              width: banner_icon_size,
              height: banner_icon_size,
              class_name: 'cart-drawer-banner__icon-svg'
            %}
          {% endif %}
        </span>

        {% if has_text %}
          {% if banner_link != blank %}
            <a
              href="{{ banner_link }}"
              class="cart-drawer-banner__text link--no-underline"
              {% if banner_new_tab %}
                target="_blank"
                rel="noopener"
              {% endif %}
            >
              {{ banner_text }}
            </a>
          {% else %}
            <span class="cart-drawer-banner__text">
              {{ banner_text }}
            </span>
          {% endif %}
        {% else %}
          <span class="cart-drawer-banner__text cart-drawer-banner__text--placeholder" aria-hidden="true"></span>
        {% endif %}

        <span class="cart-drawer-banner__icon{% unless has_right_icon %} cart-drawer-banner__icon--placeholder{% endunless %}">
          {% if has_right_icon %}
            {% render 'icon-or-image',
              icon: right_icon,
              image_upload: right_image,
              width: banner_icon_size,
              height: banner_icon_size,
              class_name: 'cart-drawer-banner__icon-svg'
            %}
          {% endif %}
        </span>
      </div>
    </div>

    <style>
      .cart-drawer-banner {
        border-bottom: var(--style-border-width) solid rgb(var(--color-border) / 0.16);
        padding-inline: var(--cart-drawer-padding);
        padding-block: var(--padding-xs);
        margin-bottom: 8px;
      }

      .cart-drawer-banner__inner {
        display: grid;
        grid-template-columns: auto 1fr auto;
        align-items: center;
        gap: var(--padding-sm);
        font-size: var(--cart-drawer-banner-font-size);
        line-height: 1.3;
        text-align: center;
      }

      .cart-drawer-banner__icon {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: var(--cart-drawer-banner-icon-size);
        height: var(--cart-drawer-banner-icon-size);
        color: currentColor;
      }

      .cart-drawer-banner__icon--placeholder {
        visibility: hidden;
      }

      .cart-drawer-banner__icon-svg {
        width: 100%;
        height: 100%;
      }

      .cart-drawer-banner__text {
        color: currentColor;
        font-size: inherit;
        line-height: inherit;
        justify-self: center;
      }

      .cart-drawer-banner__text:hover,
      .cart-drawer-banner__text:focus-visible {
        text-decoration: underline;
      }

      .cart-drawer-banner__text--placeholder {
        visibility: hidden;
      }

      .cart-drawer-banner__text.link--no-underline {
        text-decoration: none;
      }
    </style>
  {% endif %}
{% endif %}

